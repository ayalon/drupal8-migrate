# Migration configuration
id: menu_item
label: Menu links
migration_group: destinacions
source:
  plugin: menu_item
  # Full path to the file. Is overriden in my plugin
  path: public://csv/navigation_small.csv
  # The number of rows at the beginning which are not data.
  header_row_count: 1
  # These are the field names from the source file representing the key
  # uniquely identifying each node - they will be stored in the migration
  # map table as columns sourceid1, sourceid2, and sourceid3.
#  keys:
#    - ID
  keys:
    - id
  # Here we identify the columns of interest in the source file. Each numeric
  # key is the 0-based index of the column. For each column, the key below
  # (e.g., "start_date") is the field name assigned to the data on import, to
  # be used in field mappings below. The value is a user-friendly string for
  # display by the migration UI.
  column_names:
    # So, here we're saying that the first field (index 0) on each line will
    # be stored in the start_date field in the Row object during migration, and
    # that name can be used to map the value below. "Date of game" will appear
    # in the UI to describe this field.
    #0 La primera columna no l importarem
    1:
      id: id
    2:
      nom_destinacio: Nom Destinació
    #crec que el nom de les columnes és prescindible i, de fet, pot donar a error amb el rollo dels índex, si afegim una columna al CSV
destination:
  plugin: entity:menu_link_content
  no_stub: true
process:
  bundle: menu_link_content
# El titol no cal que ens vingui del plugin del mòdul
  #title: name
  title: nom_destinacio
  #  plugin: default_value
  #  default_value: test
  menu_name:
    plugin: default_value
    default_value: main
  # Full Pipeline.. see https://www.drupal.org/node/2129651
  'link/uri':
    -
      plugin: migration
      migration: migracio_destinacions
      source: id
    -
      plugin: generate_path
#  route_name: '@route/route_name'
#  route_parameters: '@route/route_parameters'
#  url: '@route/url'
#  options: '@route/options'
  external:
    plugin: default_value
    default_value: 0
  weight: 
    plugin: default_value
    default_value: 0
  expanded:
    plugin: default_value
    default_value: 1
  enabled:
    plugin: default_value
    default_value: 1
  parent:
    plugin: default_value
    default_value: 11
#    plugin: menu_link_parent
 #   source:
  #    - '31'
   #   - 'main'
    #  - 'andorra'
#      - id_pare_1000
#      - '@menu_name'
#      - parent_name
  changed: updated
migration_dependencies:
  required:
    - migracio_destinacions
